---
permalink: primer/storagegrid-architecture-and-network-topology.html 
sidebar: sidebar 
keywords: architecture, deployment, topology, site, node redundancy, services, nodes 
summary: 這個系統包含多種類型的網格節點、位於一或多個資料中心站台。StorageGRID 
---
= 架構與網路拓撲StorageGRID
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
這個系統包含多種類型的網格節點、位於一或多個資料中心站台。StorageGRID

如需StorageGRID 有關「動態網路拓撲」、「需求」和「網格通訊」的其他資訊、請參閱 link:../network/index.html["網路準則"]。



== 部署拓撲

此系統可部署至單一資料中心站台或多個資料中心站台。StorageGRID



=== 單一站台

在部署單一站台的StorageGRID 情況下、將會集中化整個過程中的基礎架構和運作。

image::../media/data_center_site_single.png[單一資料中心站台]



=== 多個站台

在部署多個站台的情況下、StorageGRID 每個站台都能安裝不同類型和數量的支援資源。例如、一個資料中心可能需要比另一個資料中心更多的儲存設備。

不同站台通常位於不同故障領域的不同地理位置、例如地震故障線或洪水平原。資料共享與災難恢復是透過自動將資料發佈至其他站台來達成。

image::../media/data_center_sites_multiple.png[多個資料中心站台]

單一資料中心內也可存在多個邏輯站台、以允許使用分散式複寫和銷毀編碼來提高可用度和恢復能力。



=== 網格節點備援

在單一站台或多站台部署中、您可以選擇性地包含多個管理節點或閘道節點來提供備援。例如、您可以在單一站台或多個站台上安裝多個管理節點。不過StorageGRID 、每個功能完善的系統只能有一個主要管理節點。



== 系統架構

下圖顯示StorageGRID 如何在一個E不到 位的系統中排列網格節點。

image::../media/grid_nodes_and_components.png[以周遭文字說明的圖表]

S3和Swift用戶端可將物件儲存及擷取StorageGRID 到靜止。其他用戶端則用於傳送電子郵件通知、存取StorageGRID 「資訊管理」介面、以及選擇性存取稽核共用。

S3和Swift用戶端可連線至閘道節點或管理節點、以使用儲存節點的負載平衡介面。或者、S3和Swift用戶端也可以使用HTTPS直接連線至儲存節點。

物件可以儲存在 StorageGRID 中的軟體或硬體型儲存節點、或儲存在雲端儲存池中、其中包含外部 S3 儲存區或 Azure Blob 儲存容器。



== 網格節點和服務

整個系統的基本建置區塊StorageGRID 是網格節點。節點包含服務、這些是軟體模組、可為網格節點提供一組功能。

此系統使用四種網格節點：StorageGRID

* *管理節點*提供系統組態、監控及記錄等管理服務。當您登入Grid Manager時、即連線至管理節點。每個網格都必須有一個主要管理節點、而且可能有額外的非主要管理節點以供備援。您可以連線至任何管理節點、每個管理節點都會顯示StorageGRID 類似的畫面、顯示有關該系統的資訊。不過、維護程序必須使用主要管理節點來執行。
+
管理節點也可用於負載平衡S3和Swift用戶端流量。

* *儲存節點*管理及儲存物件資料與中繼資料。每StorageGRID 個支援區系統必須至少有三個儲存節點。如果您有多個站台、StorageGRID 那麼您的一套系統中的每個站台也必須有三個儲存節點。
* *閘道節點（選用）*提供負載平衡介面、用戶端應用程式可用來連接StorageGRID 到VMware。負載平衡器可將用戶端無縫導向至最佳儲存節點、使節點或甚至整個站台的故障透明化。您可以使用閘道節點和管理節點的組合來進行負載平衡、也可以實作協力廠商HTTP負載平衡器。
* * 歸檔節點（已過時） * 提供可選的介面、可透過此介面將物件資料歸檔至磁帶。


若要深入瞭解、請參閱 link:../admin/index.html["管理StorageGRID"]。



=== 軟體型節點

以軟體為基礎的網格節點可透過下列方式部署：

* 做為VMware vSphere中的虛擬機器（VM）
* Linux主機上的Container引擎。支援下列作業系統：
+
** Red Hat Enterprise Linux
** CentOS
** Ubuntu
** DEBIAN




如需詳細資訊、請參閱下列內容：

* link:../vmware/index.html["安裝VMware"]
* link:../rhel/index.html["安裝Red Hat Enterprise Linux或CentOS"]
* link:../ubuntu/index.html["安裝Ubuntu或DEBIAN"]


使用 https://imt.netapp.com/matrix/#welcome["NetApp互通性對照表工具IMT （不含）"^] 以取得支援版本的清單。



=== 應用裝置節點StorageGRID

用作作業系統的各種硬體應用。StorageGRID StorageGRID有些應用裝置可做為儲存節點。其他應用裝置可做為管理節點或閘道節點。您可以將應用裝置節點與軟體型節點結合、或部署完全工程設計的全應用裝置網格、而這些網格不需依賴外部Hypervisor、儲存設備或運算硬體。

提供下列類型的 StorageGRID 應用裝置：

* SFF6112 儲存設備 * 是一款全快閃單機架單元（ 1U ）伺服器、配備 12 個 NVMe （非揮發性記憶體高速） SSD 磁碟機、並內建運算與儲存控制器。
* * SG100和SG1000服務應用裝置*是單機架單元（1U）伺服器、每個伺服器都可做為主要管理節點、非主要管理節點或閘道節點。這兩種設備可同時做為閘道節點和管理節點（主要和非主要）運作。
* * SG6000儲存設備*以儲存節點的形式運作、並將1U SG6000-CN*運算控制器與2U或4U儲存控制器機櫃結合使用。SG6000有兩種機型可供選擇：
+
** * SGF6024*：將SG6000-CN*運算控制器與2U儲存控制器機櫃相結合、其中包含24個固態磁碟機（SSD）和備援儲存控制器。
** * SG6060*：將SG6000-CN*運算控制器與4U機箱相結合、內含58個NL-SAS磁碟機、2個SSD和備援儲存控制器。每個SG6060應用裝置可支援一或兩個60磁碟機擴充櫃、最多可提供178個專屬物件儲存的磁碟機。


* * SG5700儲存應用裝置*是整合式儲存與運算平台、可做為儲存節點運作。SG5700有兩種機型可供選擇：
+
** * SG5712*：2U機箱、內含12個NL-SAS磁碟機、以及整合式儲存與運算控制器。
** * SG5760*：4U機箱、內含60個NL-SAS磁碟機、以及整合式儲存與運算控制器。




如需詳細資訊、請參閱下列內容：

* https://hwu.netapp.com["NetApp Hardware Universe"^]
* link:../installconfig/hardware-description-sg6100.html["SGF6112 儲存設備"]
* link:../installconfig/hardware-description-sg100-and-1000.html["SG100與SG1000服務應用裝置"]
* link:../installconfig/hardware-description-sg6000.html["SG6000儲存設備"]
* link:../installconfig/hardware-description-sg5700.html["SG5700儲存設備"]




=== 管理節點的主要服務

下表顯示管理節點的主要服務、但此表並未列出所有節點服務。

[cols="1a,2a"]
|===
| 服務 | 按鍵功能 


 a| 
稽核管理系統（AMS）
 a| 
追蹤系統活動和事件。



 a| 
組態管理節點（CMN）
 a| 
管理全系統組態。僅主管理節點。



 a| 
管理應用程式程式介面（mgmt-API）
 a| 
處理來自Grid Management API和租戶管理API的要求。



 a| 
高可用度
 a| 
管理管理節點和閘道節點群組的高可用度虛擬IP位址。

*附註：*此服務也可在閘道節點上找到。



 a| 
負載平衡器
 a| 
提供從用戶端到儲存節點的S3和Swift流量負載平衡。

*附註：*此服務也可在閘道節點上找到。



 a| 
網路管理系統（NMS）
 a| 
提供Grid Manager的功能。



 a| 
Prometheus
 a| 
從所有節點上的服務收集和儲存時間序列度量。



 a| 
伺服器狀態監視器（SSM）
 a| 
監控作業系統和基礎硬體。

|===


=== 儲存節點的主要服務

下表顯示儲存節點的主要服務、但此表並未列出所有節點服務。


NOTE: 有些服務（例如、ADC服務和RSM服務）通常只存在於每個站台的三個儲存節點上。

[cols="1a,2a"]
|===
| 服務 | 按鍵功能 


 a| 
帳戶（帳戶）
 a| 
管理租戶帳戶。



 a| 
管理網域控制器（ADC）
 a| 
維護拓撲和整個網格的組態。



 a| 
Cassandra
 a| 
儲存及保護物件中繼資料。



 a| 
Cassandra Reaper
 a| 
自動修復物件中繼資料。



 a| 
區塊
 a| 
管理銷毀編碼的資料和同位元檢查片段。



 a| 
資料移轉（DMV）
 a| 
將資料移至雲端儲存資源池。



 a| 
分散式資料儲存區（DDS）
 a| 
監控物件中繼資料儲存。



 a| 
身分識別（idnt）
 a| 
聯盟LDAP和Active Directory的使用者身分識別。



 a| 
本機發佈路由器（LDR）
 a| 
處理物件儲存傳輸協定要求、並管理磁碟上的物件資料。



 a| 
複寫狀態機器（RSM）
 a| 
確保 S3 平台服務要求會傳送至各自的端點。



 a| 
伺服器狀態監視器（SSM）
 a| 
監控作業系統和基礎硬體。

|===


=== 閘道節點的主要服務

下表顯示閘道節點的主要服務、但此表並未列出所有節點服務。

[cols="1a,2a"]
|===
| 服務 | 按鍵功能 


 a| 
高可用度
 a| 
管理管理節點和閘道節點群組的高可用度虛擬IP位址。

*附註：*此服務也可在管理節點上找到。



 a| 
負載平衡器
 a| 
提供從用戶端到儲存節點的S3和Swift流量的第7層負載平衡。這是建議的負載平衡機制。

*附註：*此服務也可在管理節點上找到。



 a| 
伺服器狀態監視器（SSM）
 a| 
監控作業系統和基礎硬體。

|===


=== 歸檔節點的主要服務

下表顯示歸檔節點的主要服務（現已過時）、但此表並未列出所有節點服務。


NOTE: 對歸檔節點的支援已過時、將於未來版本中移除。

[cols="1a,2a"]
|===
| 服務 | 按鍵功能 


 a| 
歸檔（ARC）
 a| 
與Tivoli Storage Manager（TSM）外部磁帶儲存系統通訊。



 a| 
伺服器狀態監視器（SSM）
 a| 
監控作業系統和基礎硬體。

|===


=== 支援服務StorageGRID

以下是StorageGRID 完整的支援服務清單。

* *客戶服務轉發器*
+
提供介面、讓負載平衡器服務查詢遠端主機上的帳戶服務、並通知負載平衡器端點組態變更負載平衡器服務。負載平衡器服務存在於管理節點和閘道節點上。

* * ADC服務（管理網域控制器）*
+
維護拓撲資訊、提供驗證服務、並回應來自LMR和CMN服務的查詢。在站台上安裝的前三個儲存節點中、每個節點都會有一個ADC服務。

* * AMS服務（稽核管理系統）*
+
監控所有已稽核的系統事件和交易、並將其記錄到文字記錄檔中。管理節點上有AMS服務。

* *資料服務（歸檔）*
+
提供管理介面、讓您透過S3介面或TSM中介軟體、設定與外部歸檔儲存設備（例如雲端）的連線。歸檔節點上有此服務。

* * Cassandra Reaper服務*
+
自動修復物件中繼資料。Cassandra Reaper服務會出現在所有儲存節點上。

* *區塊服務*
+
管理銷毀編碼的資料和同位元檢查片段。「儲存節點」上存在「區塊」服務。

* * CMN服務（組態管理節點）*
+
管理全系統的組態和網格工作。每個網格都有一個CMN服務、位於主要管理節點上。

* * DDS服務（分散式資料儲存區）*
+
與Cassandra資料庫介面、以管理物件中繼資料。DDS服務存在於儲存節點上。

* * DMM服務（資料移轉）*
+
將資料移至雲端端點。DMM服務存在於儲存節點上。

* *動態IP服務*
+
監控網格、以取得動態IP變更並更新本機組態。所有節點上都有動態IP（dynip）服務。

* * Grafana服務*
+
用於Grid Manager中的度量視覺化。Grafana服務存在於管理節點上。

* *高可用度服務*
+
管理在「高可用度群組」頁面上設定的節點上的高可用度虛擬IP。高可用度服務會出現在管理節點和閘道節點上。此服務也稱為「保留服務」。

* *身分識別（idnt）服務*
+
聯盟LDAP和Active Directory的使用者身分識別。每個站台的三個儲存節點上都有Identity服務（idnt）。

* *蘭布達仲裁服務*
+
管理S3 Select SelectObjectContent要求。

* *負載平衡器服務*
+
提供從用戶端到儲存節點的S3和Swift流量負載平衡。您可以透過「負載平衡器端點組態」頁面來設定負載平衡器服務。負載平衡器服務存在於管理節點和閘道節點上。這項服務也稱為「Ngine-GW」服務。

* *本地經銷路由器*
+
管理網格內內容的儲存與傳輸。儲存節點上有LDR服務。

* * MISCd資訊服務控制精靈服務*
+
提供一個介面、用於查詢及管理其他節點上的服務、以及管理節點上的環境組態、例如查詢其他節點上執行的服務狀態。所有節點上都有MISCd服務。

* *恩靈思服務*
+
做為各種網格服務（例如Prometheus和動態IP）的驗證與安全通訊機制、可透過HTTPS API與其他節點上的服務進行對話。所有節點均提供「Ngin像」服務。

* *恩靈斯- GW服務*
+
為負載平衡器服務提供電源。「管理節點」和「閘道節點」上有「Ngine-GW」服務。

* * NMS服務（網路管理系統）*
+
為透過Grid Manager顯示的監控、報告和組態選項提供電源。NMS服務會出現在管理節點上。

* *持續服務*
+
管理根磁碟上需要在重新開機後持續存在的檔案。所有節點上都有持續服務。

* *普羅梅修斯服務*
+
從所有節點上的服務收集時間序列指標。管理節點上有Prometheus服務。

* * RSM*服務（複寫狀態機器服務）*
+
確保平台服務要求會傳送至各自的端點。使用ADC服務的儲存節點上會出現此項RSM服務。

* *超值服務（伺服器狀態監視器）*
+
監控硬體狀況、並向NMS服務報告。每個網格節點上都有一個執行個體的SSM服務。

* *追蹤收集器服務*
+
執行追蹤收集、以收集資訊供技術支援人員使用。追蹤收集器服務使用開放原始碼Jaeger軟體、並存在於管理節點上。


