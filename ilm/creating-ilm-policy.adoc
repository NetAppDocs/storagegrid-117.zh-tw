---
permalink: ilm/creating-ilm-policy.html 
sidebar: sidebar 
keywords: create ILM policy, information lifecycle policy considerations 
summary: 資訊生命週期管理（ILM）原則是一組有序的ILM規則、可決定StorageGRID 整個系統如何長期管理物件資料。 
---
= 建立 ILM 原則：概述
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
資訊生命週期管理（ILM）原則是一組依序排列的ILM規則、可決定StorageGRID 整個過程中、物件資料的管理方式。

建立ILM原則時、請先選取及安排ILM規則。然後、您可以針對先前擷取的物件模擬原則、以驗證所建議原則的行為。當您確信建議的原則運作正常時、可以啟動原則以建立作用中原則。


CAUTION: 如果ILM原則設定不正確、可能導致無法恢復的資料遺失。啟動ILM原則之前、請仔細檢閱ILM原則及其ILM規則、然後模擬ILM原則。請務必確認ILM原則是否正常運作。



== 預設 ILM 原則

當您安裝 StorageGRID 並新增站台時、系統會自動建立預設的 ILM 原則。如果您的網格包含一個站台、則預設原則會包含一個預設規則、用於複寫該站台每個物件的兩個複本。如果您的網格包含多個站台、預設規則會在每個站台上複寫每個物件的一個複本。

如果預設原則不符合您的儲存需求、您可以建立自己的規則和原則。請參閱 link:what-ilm-rule-is.html["什麼是ILM規則"] 和 link:creating-proposed-ilm-policy.html["建立建議的ILM原則"]。



== ILM原則如何評估物件？

適用於您的整個系統的有效ILM原則StorageGRID 可控制所有物件的放置、持續時間和資料保護。

當用戶端將物件儲存StorageGRID 至物件以供參考時、會根據作用中原則中的順序ILM規則集來評估物件、如下所示：

. 如果原則中第一個規則的篩選器符合物件、則會根據該規則的擷取行為擷取物件、並根據該規則的放置指示加以儲存。
. 如果第一個規則的篩選條件與物件不符、則會根據原則中的每個後續規則來評估物件、直到進行符合為止。
. 如果沒有符合物件的規則、則會套用原則中預設規則的擷取行為和放置指示。預設規則是原則中的最後一個規則。預設規則必須套用至所有租戶、所有貯體和所有物件版本、而且不能使用任何進階篩選器。




== ILM原則範例

舉例來說、 ILM 原則可能包含三個 ILM 規則、其中指定下列項目：

* * 規則 1 ：租戶 A* 的複寫複本
+
** 比對屬於 Tenant A. 的所有物件
** 將這些物件儲存為三個站台的三個複寫複本。
** 屬於其他租戶的物件不符合規則 1 、因此會根據規則 2 進行評估。


* * 規則 2 ： 1 MB* 以上物件的銷毀編碼
+
** 比對其他租戶的所有物件、但只有在物件大於 1 MB 時才會比對。這些較大的物件使用6+3銷毀編碼儲存在三個站台。
** 不符合 1 MB 或更小的物件、因此會根據規則 3 來評估這些物件。


* * 規則 3 ： 2 份複本 2 個資料中心 * （預設）
+
** 是原則中的最後一個和預設規則。不使用篩選器。
** 為規則 1 或規則 2 不相符的所有物件建立兩個複寫複本（不屬於租戶 A 且小於 1 MB 的物件）。




image::../media/ilm_policy_and_rules.png[ILM原則與規則]



== 建議的、主動的和歷史的原則為何？

每StorageGRID 個支援系統都必須有一個作用中的ILM原則。一個不完整的系統也可能有一個建議的ILM原則和任何數量的歷史原則。StorageGRID

當您第一次建立ILM原則時、可以選取一或多個ILM規則、並依特定順序排列這些規則、藉此建立建議的原則。模擬建議的原則以確認其行為之後、您可以啟動原則以建立作用中原則。

當您啟動新的ILM原則時StorageGRID 、NetApp會使用該原則來管理所有物件、包括現有物件和新擷取的物件。在新原則中實作ILM規則時、現有物件可能會移至新位置。

啟動建議的原則會使先前作用中的原則變成歷史原則。無法刪除歷史 ILM 原則。

image::../media/ilm_policies_proposed_active_historical.png[ILM原則的概念映像]



== 建立ILM原則的考量

* 只能在測試系統中使用系統提供的原則「基準 2 複本」原則。對於 StorageGRID 11.6 及更早版本、本原則中的「製作 2 份複本」規則會使用「所有儲存節點」儲存池、其中包含所有站台。如果StorageGRID 您的作業系統有多個站台、則一個物件的兩份複本可能會放在同一個站台上。
+

NOTE: 安裝 StorageGRID 11.6 及更早版本時、系統會自動建立 All Storage Nodes 儲存池。如果您升級至較新版本的 StorageGRID 、則所有儲存節點集區仍會存在。如果您以新安裝方式安裝 StorageGRID 11.7 或更新版本、則不會建立所有儲存節點集區。

* 設計新原則時、請考量可能擷取到網格的所有不同類型物件。請確定原則包含符合的規則、並視需要放置這些物件。
* 盡量簡化ILM原則。這可避免在StorageGRID 物件資料不受預期保護的情況下、隨著時間而對該系統進行變更時、發生潛在的危險情況。
* 請確定原則中的規則順序正確。當原則啟動時、新物件和現有物件會依照列出的順序進行評估、從上方開始。例如、如果原則中的第一個規則符合某個物件、則任何其他規則都不會評估該物件。
* 每個 ILM 原則的最後一個規則是預設的 ILM 規則、無法使用任何篩選器。如果某個物件未被其他規則比對、則預設規則會控制該物件放置的位置、以及保留多久。
* 在啟動新原則之前、請先檢閱原則對現有物件放置位置所做的任何變更。變更現有物件的位置、可能會在評估和實作新放置位置時、導致暫時性資源問題。

